{"version":3,"names":["style","document","createElement","textContent","head","appendChild","timer","addEventListener","progress","div","className","body","prepend","setInterval","num","parseInt","max","Math","random","width","clearInterval","querySelector","setTimeout","parentElement","removeChild","global","factory","exports","module","define","amd","globalThis","self","pageLoadProgress","this","window","CustomEvent","e","event","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","prototype","Event","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","ownerDocument","querySelectorAll","i","length","item","closest","el","documentElement","contains","link","isPrefetch","relList","supports","customEventFactory","eventName","dispatchEvent","indexHandler","path","replace","options","ctrlKey","target","href","isEqual","URL","pathname","location","tagName","ignoreKeywords","indexOf","origin","preventDefault","url","end","error","rel","onload","onerror","xhr","XMLHttpRequest","open","send","prefetch","defer","_options"],"sources":["page-load-progress.js.map"],"sourcesContent":["!(function () {\n  var style = document.createElement('style')\n  style.textContent = `\n    .__progress__ {\n        top: 0; \n        left: 0;\n        position: fixed;\n        width: 10%;\n        height: 2px;\n        z-index: 103;\n        background-color: #e58a8a;\n        transition: width 0.4s ease 0s;\n    }`\n  document.head.appendChild(style)\n\n  var timer = null\n  document.addEventListener('progress:start', () => {\n    var progress = 10\n    var div = document.createElement('div')\n    div.className = '__progress__'\n    document.body.prepend(div)\n    var max = 10,\n      mini = 3\n    var result = max - mini\n    timer = setInterval(function () {\n      var num = parseInt(Math.random() * result)\n      var randomResult = num + mini\n      progress += randomResult\n      if (progress > 95) progress = 95\n      div.style.width = progress + '%'\n    }, 500)\n  })\n\n  document.addEventListener('progress:end', () => {\n    clearInterval(timer)\n    var progress = document.querySelector('.__progress__')\n    if (progress) progress.style.width = '100%'\n    setTimeout(() => {\n      progress.parentElement.removeChild(progress)\n    }, 500)\n  })\n})()\n;(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = typeof globalThis !== 'undefined' ? globalThis : global || self),\n      (global.pageLoadProgress = factory()))\n})(this, function () {\n  'use strict'\n  // Polyfill CustomEvent\n  ;(function () {\n    try {\n      new window.CustomEvent('T')\n    } catch (e) {\n      var CustomEvent = function (event, params) {\n        params = params || { bubbles: false, cancelable: false, detail: undefined }\n        var evt = document.createEvent('CustomEvent')\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\n        return evt\n      }\n      CustomEvent.prototype = window.Event.prototype\n      window.CustomEvent = CustomEvent\n    }\n  })()\n\n  // Polyfill matches\n  if (!Element.prototype.matches) {\n    Element.prototype.matches =\n      Element.prototype.matchesSelector ||\n      Element.prototype.mozMatchesSelector ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.oMatchesSelector ||\n      Element.prototype.webkitMatchesSelector ||\n      function (selector) {\n        var matches = (this.document || this.ownerDocument).querySelectorAll(selector)\n        var i = matches.length\n        while (--i >= 0 && matches.item(i) !== this) {}\n        return i > -1\n      }\n  }\n\n  // Polyfill closest\n  if (!Element.prototype.closest) {\n    Element.prototype.closest = function (selector) {\n      var el = this\n      if (!document.documentElement.contains(el)) return null\n      do {\n        if (el.matches(selector)) return el\n        el = el.parentElement\n      } while (el !== null)\n      return null\n    }\n  }\n\n  var link = document.createElement('link')\n  var isPrefetch = link.relList && link.relList.supports && link.relList.supports('prefetch')\n  // Polyfill prefetch\n  var prefetch = function (url, end, error) {\n    if (isPrefetch) {\n      var link = document.createElement('link')\n      link.rel = 'prefetch'\n      link.href = url\n      link.onload = end\n      link.onerror = error\n      document.head.appendChild(link)\n    } else {\n      var xhr = new XMLHttpRequest()\n      xhr.open('GET', url)\n      xhr.onload = end\n      xhr.onerror = error\n      xhr.send()\n    }\n  }\n\n  var customEventFactory = function (eventName) {\n    document.documentElement.dispatchEvent(\n      new CustomEvent(eventName, {\n        bubbles: true,\n        cancelable: true\n      })\n    )\n  }\n\n  function indexHandler(params) {\n    var path = params.replace(/(\\/index\\.html|\\/)$/gi, '')\n    if (!path.length) path = '/'\n    return path\n  }\n\n  var options = {}\n  window.addEventListener('click', function (event) {\n    if (event.ctrlKey) return\n    var target = event.target\n    if (target instanceof Element && (target = target.closest('a[href]:not([target^=_]):not([download])'))) {\n      var href = target.href\n      var isEqual = indexHandler(new URL(href).pathname) === indexHandler(location.pathname)\n      if (target.tagName !== 'A' || isEqual) return\n\n      var ignoreKeywords = options.ignoreKeywords || []\n      for (var i = 0; i < ignoreKeywords.length; i++) {\n        if (href.indexOf(ignoreKeywords[i]) !== -1) return\n      }\n\n      if (href && location.origin === new URL(href).origin) {\n        event.preventDefault()\n        customEventFactory('progress:start')\n        prefetch(\n          href,\n          function () {\n            customEventFactory('progress:end')\n            setTimeout(function () {\n              window.open(href, '_self')\n            }, options.defer || 500)\n          },\n          function () {\n            customEventFactory('progress:error')\n          }\n        )\n      }\n    }\n  })\n\n  return function (_options) {\n    options = _options\n  }\n})"],"mappings":"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"}