{
    "version": "https://jsonfeed.org/version/1",
    "title": "Lete乐特 's Blog • All posts by \"webpack\" tag",
    "description": "我相信我可以，但我一直在路上，所以我有无限的可能！！",
    "home_page_url": "https://blog.imlete.cn",
    "items": [
        {
            "id": "https://blog.imlete.cn/article/vue3-webpack5-env-config.html",
            "url": "https://blog.imlete.cn/article/vue3-webpack5-env-config.html",
            "title": "Vue3+Webpack5手动搭建环境",
            "date_published": "2021-06-25T13:53:55.000Z",
            "content_html": "<blockquote>\n<p>刚学会用<code>Vue</code>框架，由于我有点前端基础，在没有接触Vue等框架的之前，都是纯手写的html静态页面<br>但我当时已经接触了很多关于Node的很多用法，以及了解<code>npm</code>、<code>webpack</code>等(全是拜Hexo所赐)<br>所有在学习Vue的时候不是用<code>&lt;script&gt;&lt;/script&gt;</code>标签引入的，直接就使用<code>Vue CLI</code>构建，直接学习<br>学习的时候一直用的是<code>Vue CLI</code>构建构建项目，在<code>build</code>时我不想让Vue CLI打包成好几个js文件，当时也上网查了很多资料<br>视乎Vue CLI并不允许这样做，但是也有很多大神提供了很多办法，奈何我看不懂，只能手动搭建vue+webpack环境</p>\n</blockquote>\n<p>创建项目目录<code>D:\\Vue3_Webpack5</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> ./Vue3_Webpack5 <span class=\"comment\"># 进入项目目录</span></span><br><span class=\"line\">npm init -y <span class=\"comment\"># 初始化项目</span></span><br><span class=\"line\">npm install webpack webpack-cli --save-dev <span class=\"comment\"># 安装webpack 以及webpack-cli</span></span><br></pre></td></tr></table></figure>\n\n<p>在根目录创建<code>webpack.config.js</code>–<code>webpack.dev.config.js</code>–<code>template/index.html</code>–<code>src/index.js</code>如下图<br><img src=\"/img/Vue3-Webpack5/1.png\" alt=\"项目基本目录\"></p>\n<blockquote>\n<p>我个人不喜欢使用webpack的配置文件合并功能，我更喜欢新建指定文件让webpack去执行<br>虽然这种办法会出现很多冗余代码，但是这样能更清晰明了的读懂代码</p>\n</blockquote>\n<p>修改webpack.config.js和webpack.dev.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&quot;production&quot;</span>, <span class=\"comment\">// 环境模式</span></span><br><span class=\"line\">  <span class=\"attr\">entry</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./src/index.js&#x27;</span>), <span class=\"comment\">// 打包入口</span></span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">path</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>), <span class=\"comment\">// 打包出口(输出目录)</span></span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span> <span class=\"comment\">// 打包完的静态资源文件名</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.dev.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>, <span class=\"comment\">// 环境模式</span></span><br><span class=\"line\">    <span class=\"attr\">entry</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./src/index.js&#x27;</span>), <span class=\"comment\">// 打包入口</span></span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">path</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>), <span class=\"comment\">// 打包出口(输出目录)</span></span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span> <span class=\"comment\">// 打包完的静态资源文件名</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>修改<code>package.json</code>的<code>script</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;bulid&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;webpack --config ./webpack.config.js&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;dev&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;webpack serve --config ./webpack.dev.config.js&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n\n<p>安装<code>html-webpack-plugin webpack-dev-server</code>插件，就不用每次写完代码后要重新打包运行了<br>执行<code>npm install html-webpack-plugin webpack-dev-server -D</code></p>\n<blockquote>\n<p>由于<code>html-webpack-plugin</code>插件在默认情况下会自动注入打包好的js<br>并且添加的位置是<code>&lt;/head&gt;</code>之前，拥有<code>defer</code>属性<br>可是我想让js导入的位置是<code>&lt;/body&gt;</code>之前我该怎么做？<br>给webpack里的<code>new HtmlWebpackPlugin()</code>添加<code>inject: false</code></p>\n</blockquote>\n<p>修改webpack.dev.config.js和webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// webpack.dev.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">HtmlWebpackPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>, <span class=\"comment\">// 环境模式</span></span><br><span class=\"line\">    <span class=\"attr\">entry</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./src/index.js&#x27;</span>), <span class=\"comment\">// 打包入口</span></span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">path</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>), <span class=\"comment\">// 打包出口(输出目录)</span></span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span> <span class=\"comment\">// 打包完的静态资源文件名</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">HtmlWebpackPlugin</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">template</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./template/index.html&#x27;</span>), <span class=\"comment\">// 我们要使用的 html 模板地址</span></span><br><span class=\"line\">            <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;index.html&#x27;</span>, <span class=\"comment\">// 打包后输出的文件名</span></span><br><span class=\"line\">            <span class=\"attr\">title</span>: <span class=\"string\">&#x27;手动建搭 Vue 开发环境&#x27;</span>, <span class=\"comment\">// index.html 模板内，通过 &lt;%= htmlWebpackPlugin.options.title %&gt; 拿到的变量</span></span><br><span class=\"line\">            <span class=\"attr\">inject</span>: <span class=\"literal\">false</span> <span class=\"comment\">// 禁止插件自动注入js</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">contentBase</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./dist&#x27;</span>),</span><br><span class=\"line\">        <span class=\"attr\">port</span>: <span class=\"number\">1104</span>,</span><br><span class=\"line\">        <span class=\"attr\">publicPath</span>: <span class=\"string\">&#x27;/&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">hot</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用热重载</span></span><br><span class=\"line\">        <span class=\"attr\">open</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 自动打开浏览器</span></span><br><span class=\"line\">        <span class=\"attr\">compress</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 压缩</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>修改<code>template/index.html</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;app&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;./main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>安装Vue3 <code>npm install vue@next --save</code>注意必须使用<code>@next</code>，如果不使用，则安装的是vue2的最新版本而不是vue3</p>\n<p>安装完成后创建<code>/scr/App.vue</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;lete&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>这里是乐特博客：<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">:href</span>=<span class=\"string\">&quot;blog&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;_blank&quot;</span>&gt;</span>&#123;&#123; blog &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"attr\">components</span>: &#123;&#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">  <span class=\"title function_\">data</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"attr\">blog</span>: <span class=\"string\">&quot;https://blog.lete114.top&quot;</span>,</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\">  &#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"selector-class\">.lete</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">  <span class=\"attribute\">color</span>: <span class=\"number\">#00c4b6</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>修改<code>src/index.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createApp &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span> <span class=\"comment\">// Vue 3.x 引入 vue 的形式</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App.vue&#x27;</span> <span class=\"comment\">// 引入 APP 页面组建</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>) <span class=\"comment\">// 通过 createApp 初始化 app</span></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"string\">&#x27;#app&#x27;</span>) <span class=\"comment\">// 挂载页面上的#app</span></span><br></pre></td></tr></table></figure>\n\n<p>到这里先别急着运行代码，我们还得安装<code>load</code></p>\n<p>需要安装两个插件</p>\n<ol>\n<li>vue-loader<br>它是基于 webpack 的一个的 loader 插件，解析和转换 .vue 文件</li>\n<li>@vue/compiler-sfc<br>在这里提醒一下，我之前搭建的时候看的是<a href=\"https://vue-loader.vuejs.org/zh\">vue-loader</a>官网的教程，里面说要安装<code>vue-template-compiler</code>插件，我安装后运行报错，我以为我哪个步骤出现了问题，排查了好几遍都没发现啥毛病，最后删了重来还是报错(崩溃，浪费了好多时间)，最后我翻开了之前用<code>Vue CLI</code>构建的项目，发现Vue3用的是<code>@vue/compiler-sfc</code>而不是官网说的<code>vue-template-compiler</code>，害我折腾了好久，更气人的是，官网并没有说明是vue2的教程(可能官方推荐使用vue3的时候用cli构建吧)</li>\n</ol>\n<p>安装插件<code>npm install vue-loader@next @vue/compiler-sfc -D</code></p>\n<blockquote>\n<p>安装vue3要用<code>@next</code>安装load当然也要，否则安装的就是vue2的load了</p>\n</blockquote>\n<p>慢着，还需要两个插件<code>style-loader</code>和<code>css-loader</code>处理vue的css样式<br><code>npm install style-loader css-loader -D</code></p>\n<p>修改webpack.dev.config.js和webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.dev.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">HtmlWebpackPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">VueLoaderPlugin</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;vue-loader&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>, <span class=\"comment\">// 环境模式</span></span><br><span class=\"line\">    <span class=\"attr\">entry</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./src/index.js&#x27;</span>), <span class=\"comment\">// 打包入口</span></span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">path</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>), <span class=\"comment\">// 打包出口(输出目录)</span></span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span> <span class=\"comment\">// 打包完的静态资源文件名</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.vue$/</span>,</span><br><span class=\"line\">                <span class=\"attr\">use</span>: [<span class=\"string\">&#x27;vue-loader&#x27;</span>]</span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\">                <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">                <span class=\"attr\">use</span>: [<span class=\"string\">&#x27;style-loader&#x27;</span>, <span class=\"string\">&#x27;css-loader&#x27;</span>]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">HtmlWebpackPlugin</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">template</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./template/index.html&#x27;</span>), <span class=\"comment\">// 我们要使用的 html 模板地址</span></span><br><span class=\"line\">            <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;index.html&#x27;</span>, <span class=\"comment\">// 打包后输出的文件名</span></span><br><span class=\"line\">            <span class=\"attr\">title</span>: <span class=\"string\">&#x27;手动建搭 Vue 开发环境&#x27;</span>, <span class=\"comment\">// index.html 模板内，通过 &lt;%= htmlWebpackPlugin.options.title %&gt; 拿到的变量</span></span><br><span class=\"line\">            <span class=\"attr\">inject</span>: <span class=\"literal\">false</span> <span class=\"comment\">// 禁止插件自动注入js</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">VueLoaderPlugin</span>()<span class=\"comment\">// 添加 VueLoaderPlugin 插件</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">contentBase</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./dist&#x27;</span>),</span><br><span class=\"line\">        <span class=\"attr\">port</span>: <span class=\"number\">1104</span>,</span><br><span class=\"line\">        <span class=\"attr\">publicPath</span>: <span class=\"string\">&#x27;/&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">hot</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用热重载</span></span><br><span class=\"line\">        <span class=\"attr\">open</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 自动打开浏览器</span></span><br><span class=\"line\">        <span class=\"attr\">compress</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 压缩</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>安装<code>clean-webpack-plugin</code>插件，每次build代码的时候都会清除<code>dist</code>目录，避免上一次build遗留下来的文件</p>\n<p>修改webpack.config.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">VueLoaderPlugin</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;vue-loader&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;<span class=\"title class_\">CleanWebpackPlugin</span>&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&quot;production&quot;</span>, <span class=\"comment\">// 环境模式</span></span><br><span class=\"line\">    <span class=\"attr\">entry</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;./src/index.js&#x27;</span>), <span class=\"comment\">// 打包入口</span></span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">path</span>: path.<span class=\"title function_\">join</span>(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>), <span class=\"comment\">// 打包出口(输出目录)</span></span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span> <span class=\"comment\">// 打包完的静态资源文件名</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.vue$/</span>,</span><br><span class=\"line\">                <span class=\"attr\">use</span>: [<span class=\"string\">&#x27;vue-loader&#x27;</span>]</span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\">                <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">                <span class=\"attr\">use</span>: [<span class=\"string\">&#x27;style-loader&#x27;</span>, <span class=\"string\">&#x27;css-loader&#x27;</span>]</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">VueLoaderPlugin</span>(),<span class=\"comment\">// 添加 VueLoaderPlugin 插件</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">CleanWebpackPlugin</span>()</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>安装babel插件让我们写的代码在build的时候兼容指定浏览器的版本号<br><code>npm install @babel/core @babel/preset-env babel-loader</code><br>在根目录下新建<code>babel.config.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">      [<span class=\"string\">&quot;@babel/preset-env&quot;</span>, &#123;</span><br><span class=\"line\">          <span class=\"string\">&quot;targets&quot;</span>: &#123;</span><br><span class=\"line\">              <span class=\"string\">&quot;browsers&quot;</span>: [<span class=\"string\">&quot;last 2 versions&quot;</span>] <span class=\"comment\">// 最近 2 个版本的浏览器</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;]</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在webpack.config.js中的module新增</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">        <span class=\"comment\">// 其他插件</span></span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">            <span class=\"attr\">exclude</span>: <span class=\"regexp\">/node_modules/</span>, <span class=\"comment\">// 不编译node_modules下的文件</span></span><br><span class=\"line\">            <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;babel-loader&#x27;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">// 其他插件</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>自己要分清楚，有些插件是在开发时需要，而有些在build时不需要，如果你觉得都一样，也可以只写一个webpack.config.js把全部配置全部塞进去</p>\n<p>比如<code>clean-webpack-plugin</code>在dev时根本就没啥用，同理在build的时候<code>webpack-dev-server</code>也是没用的，在build的时候也可以不用<code>html-webpack-plugin</code></p>\n",
            "tags": [
                "记录",
                "Node",
                "Vue",
                "Webpack"
            ]
        }
    ]
}